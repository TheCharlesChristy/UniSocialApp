<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug DOM Structure</title>
    <style>
        body { font-family: monospace; margin: 20px; }
        .debug-info { background: #f0f0f0; padding: 10px; margin: 10px 0; border-radius: 5px; }
        .found { color: green; }
        .not-found { color: red; }
    </style>
</head>
<body>
    <h1>DOM Structure Debug</h1>
    <div id="debug-output"></div>
    
    <script>
        function debugDOM() {
            const output = document.getElementById('debug-output');
            let html = '';
            
            // Check for comments-list elements
            const commentsLists = document.querySelectorAll('.comments-list');
            html += `<div class="debug-info">
                <strong>Comments Lists Found:</strong> ${commentsLists.length}
                ${commentsLists.length > 0 ? '<span class="found">✓</span>' : '<span class="not-found">✗</span>'}
            </div>`;
            
            commentsLists.forEach((list, index) => {
                const postId = list.getAttribute('data-post-id');
                html += `<div class="debug-info">
                    Comments List ${index + 1}: data-post-id="${postId}"
                    <br>Parent: ${list.parentElement.className}
                    <br>Children: ${list.children.length}
                </div>`;
            });
            
            // Check for post containers
            const postContainers = document.querySelectorAll('[data-post-id]');
            html += `<div class="debug-info">
                <strong>Elements with data-post-id:</strong> ${postContainers.length}
                ${postContainers.length > 0 ? '<span class="found">✓</span>' : '<span class="not-found">✗</span>'}
            </div>`;
            
            postContainers.forEach((container, index) => {
                const postId = container.getAttribute('data-post-id');
                html += `<div class="debug-info">
                    Post Container ${index + 1}: ${container.tagName}.${container.className} 
                    <br>data-post-id="${postId}"
                </div>`;
            });
            
            // Check for add comment forms
            const addCommentForms = document.querySelectorAll('.add-comment-form');
            html += `<div class="debug-info">
                <strong>Add Comment Forms:</strong> ${addCommentForms.length}
                ${addCommentForms.length > 0 ? '<span class="found">✓</span>' : '<span class="not-found">✗</span>'}
            </div>`;
            
            output.innerHTML = html;
        }
        
        // Run debug after page loads
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', debugDOM);
        } else {
            debugDOM();
        }
        
        // Also run after a delay to catch dynamically loaded content
        setTimeout(debugDOM, 2000);
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Saved Content - SocialConnect</title>
    <link rel="stylesheet" href="../css/generic.css">
    <link rel="stylesheet" href="../css/saved-content.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <a href="main-feed.html">SocialConnect</a>
            </div>
            
            <div class="nav-search">
                <input type="text" placeholder="Search saved content..." id="globalSearch">
                <button type="button" class="search-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="m21 21-4.35-4.35"></path>
                    </svg>
                </button>
            </div>

            <div class="nav-menu" id="navMenu">
                <div class="nav-links">
                    <a href="main-feed.html" class="nav-link">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                        </svg>
                        Home
                    </a>
                    <a href="messages.html" class="nav-link">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                        </svg>
                        Messages
                    </a>
                    <a href="notifications.html" class="nav-link">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"></path>
                            <path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"></path>
                        </svg>
                        Notifications
                    </a>
                </div>

                <div class="nav-profile">
                    <div class="dropdown">
                        <button class="dropdown-toggle profile-btn">
                            <img src="../images/avatar-placeholder.svg" alt="Profile" class="profile-avatar">
                            <span>John Doe</span>
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6,9 12,15 18,9"></polyline>
                            </svg>
                        </button>
                        <div class="dropdown-menu">
                            <a href="user-profile.html" class="dropdown-item">View Profile</a>
                            <a href="edit-profile.html" class="dropdown-item">Edit Profile</a>
                            <a href="manage-account.html" class="dropdown-item">Account Settings</a>
                            <a href="privacy-settings.html" class="dropdown-item">Privacy Settings</a>
                            <div class="dropdown-divider"></div>
                            <a href="help-support.html" class="dropdown-item">Help & Support</a>
                            <a href="login.html" class="dropdown-item text-danger">Sign Out</a>
                        </div>
                    </div>
                </div>
            </div>

            <button class="nav-toggle" id="navToggle">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <div class="saved-content-container">
            <!-- Header -->
            <div class="saved-header">
                <div class="saved-title">
                    <h1>
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
                        </svg>
                        Saved Content
                    </h1>
                    <p>Items you've saved for later</p>
                </div>
                <div class="saved-actions">
                    <button class="btn btn-secondary" id="selectModeBtn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="9,11 12,14 22,4"></polyline>
                            <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path>
                        </svg>
                        Select
                    </button>
                    <div class="dropdown">
                        <button class="btn btn-secondary dropdown-toggle">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="1"></circle>
                                <circle cx="12" cy="5" r="1"></circle>
                                <circle cx="12" cy="19" r="1"></circle>
                            </svg>
                            More
                        </button>
                        <div class="dropdown-menu">
                            <button class="dropdown-item" id="createCollectionBtn">Create Collection</button>
                            <button class="dropdown-item" id="exportSavedBtn">Export Saved Items</button>
                            <div class="dropdown-divider"></div>
                            <button class="dropdown-item text-danger" id="clearAllBtn">Clear All Saved</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Filter and Sort -->
            <div class="saved-filters">
                <div class="filter-tabs">
                    <button class="filter-tab active" data-filter="all">
                        All <span class="count">247</span>
                    </button>
                    <button class="filter-tab" data-filter="posts">
                        Posts <span class="count">156</span>
                    </button>
                    <button class="filter-tab" data-filter="photos">
                        Photos <span class="count">63</span>
                    </button>
                    <button class="filter-tab" data-filter="videos">
                        Videos <span class="count">28</span>
                    </button>
                    <button class="filter-tab" data-filter="collections">
                        Collections <span class="count">8</span>
                    </button>
                </div>
                <div class="filter-controls">
                    <select class="form-select" id="sortBy">
                        <option value="recent">Most Recent</option>
                        <option value="oldest">Oldest First</option>
                        <option value="popular">Most Popular</option>
                        <option value="alphabetical">A-Z</option>
                    </select>
                    <div class="view-toggle">
                        <button class="view-btn active" data-view="grid">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="3" width="7" height="7"></rect>
                                <rect x="14" y="3" width="7" height="7"></rect>
                                <rect x="14" y="14" width="7" height="7"></rect>
                                <rect x="3" y="14" width="7" height="7"></rect>
                            </svg>
                        </button>
                        <button class="view-btn" data-view="list">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="8" y1="6" x2="21" y2="6"></line>
                                <line x1="8" y1="12" x2="21" y2="12"></line>
                                <line x1="8" y1="18" x2="21" y2="18"></line>
                                <line x1="3" y1="6" x2="3.01" y2="6"></line>
                                <line x1="3" y1="12" x2="3.01" y2="12"></line>
                                <line x1="3" y1="18" x2="3.01" y2="18"></line>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Collections Section -->
            <div class="collections-section" id="collectionsSection">
                <h2>Your Collections</h2>
                <div class="collections-grid">
                    <div class="collection-card">
                        <div class="collection-preview">
                            <div class="collection-images">
                                <img src="../images/sample-post-1.jpg" alt="Collection preview">
                                <img src="../images/sample-post-2.jpg" alt="Collection preview">
                                <img src="../images/sample-post-3.jpg" alt="Collection preview">
                            </div>
                        </div>
                        <div class="collection-info">
                            <h3>Travel Inspiration</h3>
                            <p>24 items</p>
                        </div>
                    </div>

                    <div class="collection-card">
                        <div class="collection-preview">
                            <div class="collection-images">
                                <img src="../images/sample-recipe-1.jpg" alt="Collection preview">
                                <img src="../images/sample-recipe-2.jpg" alt="Collection preview">
                                <img src="../images/sample-recipe-3.jpg" alt="Collection preview">
                            </div>
                        </div>
                        <div class="collection-info">
                            <h3>Recipes to Try</h3>
                            <p>18 items</p>
                        </div>
                    </div>

                    <div class="collection-card">
                        <div class="collection-preview">
                            <div class="collection-images">
                                <img src="../images/sample-design-1.jpg" alt="Collection preview">
                                <img src="../images/sample-design-2.jpg" alt="Collection preview">
                                <img src="../images/sample-design-3.jpg" alt="Collection preview">
                            </div>
                        </div>
                        <div class="collection-info">
                            <h3>Design Ideas</h3>
                            <p>31 items</p>
                        </div>
                    </div>

                    <div class="collection-card create-collection">
                        <div class="create-collection-content">
                            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="12" y1="5" x2="12" y2="19"></line>
                                <line x1="5" y1="12" x2="19" y2="12"></line>
                            </svg>
                            <h3>Create Collection</h3>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Saved Items Grid -->
            <div class="saved-content-grid" id="savedContentGrid">
                <!-- Saved Post -->
                <div class="saved-item" data-type="posts" data-date="2024-03-15">
                    <div class="saved-item-content">
                        <div class="saved-item-header">
                            <div class="saved-item-author">
                                <img src="../images/avatar-placeholder.svg" alt="Sarah Wilson" class="author-avatar">
                                <div class="author-info">
                                    <h4>Sarah Wilson</h4>
                                    <span class="post-date">March 15, 2024</span>
                                </div>
                            </div>
                            <div class="saved-item-actions">
                                <button class="action-btn" title="Add to Collection">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
                                    </svg>
                                </button>
                                <div class="dropdown">
                                    <button class="action-btn dropdown-toggle">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="1"></circle>
                                            <circle cx="12" cy="5" r="1"></circle>
                                            <circle cx="12" cy="19" r="1"></circle>
                                        </svg>
                                    </button>
                                    <div class="dropdown-menu">
                                        <button class="dropdown-item">Share</button>
                                        <button class="dropdown-item">Copy Link</button>
                                        <div class="dropdown-divider"></div>
                                        <button class="dropdown-item text-danger">Remove from Saved</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="saved-item-body">
                            <p>Just finished this amazing sunset hike! The view from the top was absolutely breathtaking. Nature never fails to amaze me 🌅</p>
                            <div class="saved-item-image">
                                <img src="../images/sample-sunset.jpg" alt="Sunset hike">
                            </div>
                        </div>
                        <div class="saved-item-footer">
                            <span class="saved-date">Saved 2 days ago</span>
                            <div class="engagement-stats">
                                <span>❤️ 142</span>
                                <span>💬 28</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Saved Photo -->
                <div class="saved-item" data-type="photos" data-date="2024-03-14">
                    <div class="saved-item-content">
                        <div class="saved-item-header">
                            <div class="saved-item-author">
                                <img src="../images/avatar-placeholder.svg" alt="Mike Johnson" class="author-avatar">
                                <div class="author-info">
                                    <h4>Mike Johnson</h4>
                                    <span class="post-date">March 14, 2024</span>
                                </div>
                            </div>
                            <div class="saved-item-actions">
                                <button class="action-btn" title="Add to Collection">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
                                    </svg>
                                </button>
                                <div class="dropdown">
                                    <button class="action-btn dropdown-toggle">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="1"></circle>
                                            <circle cx="12" cy="5" r="1"></circle>
                                            <circle cx="12" cy="19" r="1"></circle>
                                        </svg>
                                    </button>
                                    <div class="dropdown-menu">
                                        <button class="dropdown-item">Share</button>
                                        <button class="dropdown-item">Download</button>
                                        <button class="dropdown-item">Copy Link</button>
                                        <div class="dropdown-divider"></div>
                                        <button class="dropdown-item text-danger">Remove from Saved</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="saved-item-body">
                            <div class="saved-item-image">
                                <img src="../images/sample-architecture.jpg" alt="Modern architecture">
                            </div>
                            <p>Incredible modern architecture in downtown! The way light plays with these geometric forms is mesmerizing.</p>
                        </div>
                        <div class="saved-item-footer">
                            <span class="saved-date">Saved 3 days ago</span>
                            <div class="engagement-stats">
                                <span>❤️ 89</span>
                                <span>💬 15</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Saved Video -->
                <div class="saved-item" data-type="videos" data-date="2024-03-13">
                    <div class="saved-item-content">
                        <div class="saved-item-header">
                            <div class="saved-item-author">
                                <img src="../images/avatar-placeholder.svg" alt="Lisa Chen" class="author-avatar">
                                <div class="author-info">
                                    <h4>Lisa Chen</h4>
                                    <span class="post-date">March 13, 2024</span>
                                </div>
                            </div>
                            <div class="saved-item-actions">
                                <button class="action-btn" title="Add to Collection">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
                                    </svg>
                                </button>
                                <div class="dropdown">
                                    <button class="action-btn dropdown-toggle">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="1"></circle>
                                            <circle cx="12" cy="5" r="1"></circle>
                                            <circle cx="12" cy="19" r="1"></circle>
                                        </svg>
                                    </button>
                                    <div class="dropdown-menu">
                                        <button class="dropdown-item">Share</button>
                                        <button class="dropdown-item">Copy Link</button>
                                        <div class="dropdown-divider"></div>
                                        <button class="dropdown-item text-danger">Remove from Saved</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="saved-item-body">
                            <div class="saved-item-video">
                                <video poster="../images/video-thumbnail.jpg" controls>
                                    <source src="../videos/cooking-tutorial.mp4" type="video/mp4">
                                    Your browser does not support the video tag.
                                </video>
                                <div class="video-overlay">
                                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <polygon points="5,3 19,12 5,21 5,3"></polygon>
                                    </svg>
                                </div>
                            </div>
                            <p>Quick and easy pasta recipe that's perfect for busy weeknights! Takes only 15 minutes to make.</p>
                        </div>
                        <div class="saved-item-footer">
                            <span class="saved-date">Saved 4 days ago</span>
                            <div class="engagement-stats">
                                <span>❤️ 234</span>
                                <span>💬 56</span>
                                <span>▶️ 1.2k</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- More saved items would continue here -->
                <div class="saved-item" data-type="posts" data-date="2024-03-12">
                    <div class="saved-item-content">
                        <div class="saved-item-header">
                            <div class="saved-item-author">
                                <img src="../images/avatar-placeholder.svg" alt="David Brown" class="author-avatar">
                                <div class="author-info">
                                    <h4>David Brown</h4>
                                    <span class="post-date">March 12, 2024</span>
                                </div>
                            </div>
                            <div class="saved-item-actions">
                                <button class="action-btn" title="Add to Collection">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
                                    </svg>
                                </button>
                                <div class="dropdown">
                                    <button class="action-btn dropdown-toggle">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="1"></circle>
                                            <circle cx="12" cy="5" r="1"></circle>
                                            <circle cx="12" cy="19" r="1"></circle>
                                        </svg>
                                    </button>
                                    <div class="dropdown-menu">
                                        <button class="dropdown-item">Share</button>
                                        <button class="dropdown-item">Copy Link</button>
                                        <div class="dropdown-divider"></div>
                                        <button class="dropdown-item text-danger">Remove from Saved</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="saved-item-body">
                            <p>Great tips for improving productivity and work-life balance! These strategies have really helped me stay focused and motivated.</p>
                        </div>
                        <div class="saved-item-footer">
                            <span class="saved-date">Saved 5 days ago</span>
                            <div class="engagement-stats">
                                <span>❤️ 76</span>
                                <span>💬 23</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Load More -->
            <div class="load-more-section">
                <button class="btn btn-secondary" id="loadMoreBtn">
                    Load More Saved Items
                </button>
            </div>

            <!-- Empty State -->
            <div class="empty-state" id="emptyState" style="display: none;">
                <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                    <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
                </svg>
                <h3>No saved content</h3>
                <p>Start saving posts, photos, and videos to see them here.</p>
                <a href="main-feed.html" class="btn btn-primary">Explore Feed</a>
            </div>
        </div>
    </main>

    <!-- Create Collection Modal -->
    <div class="modal" id="createCollectionModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Create New Collection</h3>
                <button class="modal-close" id="closeCreateCollection">&times;</button>
            </div>
            <div class="modal-body">
                <form id="createCollectionForm">
                    <div class="form-group">
                        <label for="collectionName">Collection Name</label>
                        <input type="text" id="collectionName" class="form-control" placeholder="Enter collection name" required>
                    </div>
                    <div class="form-group">
                        <label for="collectionDescription">Description (optional)</label>
                        <textarea id="collectionDescription" class="form-control" rows="3" placeholder="Describe your collection"></textarea>
                    </div>
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="collectionPrivate">
                            <span class="checkmark"></span>
                            Make this collection private
                        </label>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancelCreateCollection">Cancel</button>
                <button type="submit" form="createCollectionForm" class="btn btn-primary">Create Collection</button>
            </div>
        </div>
    </div>

    <script>
        // Navigation functionality
        document.getElementById('navToggle').addEventListener('click', function() {
            const navMenu = document.getElementById('navMenu');
            navMenu.classList.toggle('active');
        });

        // Dropdown functionality
        document.querySelectorAll('.dropdown-toggle').forEach(toggle => {
            toggle.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                const dropdown = this.parentElement;
                dropdown.classList.toggle('active');
            });
        });

        // Close dropdowns when clicking outside
        document.addEventListener('click', function() {
            document.querySelectorAll('.dropdown').forEach(dropdown => {
                dropdown.classList.remove('active');
            });
        });

        // Filter functionality
        document.querySelectorAll('.filter-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                document.querySelectorAll('.filter-tab').forEach(t => t.classList.remove('active'));
                this.classList.add('active');
                
                const filter = this.dataset.filter;
                filterSavedItems(filter);
            });
        });

        function filterSavedItems(filter) {
            const items = document.querySelectorAll('.saved-item');
            const collectionsSection = document.getElementById('collectionsSection');
            
            if (filter === 'collections') {
                collectionsSection.style.display = 'block';
                items.forEach(item => item.style.display = 'none');
            } else {
                collectionsSection.style.display = filter === 'all' ? 'block' : 'none';
                items.forEach(item => {
                    const itemType = item.dataset.type;
                    if (filter === 'all' || itemType === filter) {
                        item.style.display = 'block';
                    } else {
                        item.style.display = 'none';
                    }
                });
            }
        }

        // Sort functionality
        document.getElementById('sortBy').addEventListener('change', function() {
            const sortBy = this.value;
            sortSavedItems(sortBy);
        });

        function sortSavedItems(sortBy) {
            const container = document.getElementById('savedContentGrid');
            const items = Array.from(container.children);
            
            items.sort((a, b) => {
                switch (sortBy) {
                    case 'recent':
                        return new Date(b.dataset.date) - new Date(a.dataset.date);
                    case 'oldest':
                        return new Date(a.dataset.date) - new Date(b.dataset.date);
                    case 'alphabetical':
                        const aTitle = a.querySelector('.author-info h4').textContent;
                        const bTitle = b.querySelector('.author-info h4').textContent;
                        return aTitle.localeCompare(bTitle);
                    default:
                        return 0;
                }
            });
            
            items.forEach(item => container.appendChild(item));
        }

        // View toggle
        document.querySelectorAll('.view-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.view-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                
                const view = this.dataset.view;
                const grid = document.getElementById('savedContentGrid');
                
                if (view === 'list') {
                    grid.classList.add('list-view');
                } else {
                    grid.classList.remove('list-view');
                }
            });
        });

        // Select mode
        let selectMode = false;
        let selectedItems = new Set();

        document.getElementById('selectModeBtn').addEventListener('click', function() {
            selectMode = !selectMode;
            
            if (selectMode) {
                this.innerHTML = '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg> Cancel';
                this.classList.add('btn-danger');
                document.body.classList.add('select-mode');
                enableSelectMode();
            } else {
                this.innerHTML = '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9,11 12,14 22,4"></polyline><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path></svg> Select';
                this.classList.remove('btn-danger');
                document.body.classList.remove('select-mode');
                disableSelectMode();
            }
        });

        function enableSelectMode() {
            document.querySelectorAll('.saved-item').forEach(item => {
                const checkbox = document.createElement('div');
                checkbox.className = 'select-checkbox';
                checkbox.innerHTML = '<input type="checkbox">';
                item.appendChild(checkbox);
                
                checkbox.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const input = this.querySelector('input');
                    input.checked = !input.checked;
                    
                    if (input.checked) {
                        selectedItems.add(item);
                        item.classList.add('selected');
                    } else {
                        selectedItems.delete(item);
                        item.classList.remove('selected');
                    }
                });
            });
        }

        function disableSelectMode() {
            document.querySelectorAll('.select-checkbox').forEach(checkbox => {
                checkbox.remove();
            });
            document.querySelectorAll('.saved-item').forEach(item => {
                item.classList.remove('selected');
            });
            selectedItems.clear();
        }

        // Create collection modal
        const createCollectionModal = document.getElementById('createCollectionModal');
        
        document.getElementById('createCollectionBtn').addEventListener('click', function() {
            createCollectionModal.classList.add('active');
        });

        document.querySelector('.create-collection').addEventListener('click', function() {
            createCollectionModal.classList.add('active');
        });

        document.getElementById('closeCreateCollection').addEventListener('click', function() {
            createCollectionModal.classList.remove('active');
        });

        document.getElementById('cancelCreateCollection').addEventListener('click', function() {
            createCollectionModal.classList.remove('active');
        });

        createCollectionModal.addEventListener('click', function(e) {
            if (e.target === this) {
                this.classList.remove('active');
            }
        });

        document.getElementById('createCollectionForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('collectionName').value;
            const description = document.getElementById('collectionDescription').value;
            const isPrivate = document.getElementById('collectionPrivate').checked;
            
            console.log('Creating collection:', { name, description, isPrivate });
            
            // Add new collection to grid
            const collectionsGrid = document.querySelector('.collections-grid');
            const createBtn = collectionsGrid.querySelector('.create-collection');
            
            const newCollection = document.createElement('div');
            newCollection.className = 'collection-card';
            newCollection.innerHTML = `
                <div class="collection-preview">
                    <div class="collection-images">
                        <div class="empty-collection">Empty</div>
                    </div>
                </div>
                <div class="collection-info">
                    <h3>${name}</h3>
                    <p>0 items</p>
                </div>
            `;
            
            collectionsGrid.insertBefore(newCollection, createBtn);
            
            // Close modal and reset form
            createCollectionModal.classList.remove('active');
            this.reset();
            
            alert('Collection created successfully!');
        });

        // Remove from saved
        document.addEventListener('click', function(e) {
            if (e.target.closest('.dropdown-item') && e.target.textContent.includes('Remove from Saved')) {
                const item = e.target.closest('.saved-item');
                if (confirm('Remove this item from your saved content?')) {
                    item.remove();
                    
                    // Update counts
                    updateFilterCounts();
                }
            }
        });

        function updateFilterCounts() {
            const allItems = document.querySelectorAll('.saved-item').length;
            const posts = document.querySelectorAll('.saved-item[data-type="posts"]').length;
            const photos = document.querySelectorAll('.saved-item[data-type="photos"]').length;
            const videos = document.querySelectorAll('.saved-item[data-type="videos"]').length;
            const collections = document.querySelectorAll('.collection-card:not(.create-collection)').length;
            
            document.querySelector('[data-filter="all"] .count').textContent = allItems;
            document.querySelector('[data-filter="posts"] .count').textContent = posts;
            document.querySelector('[data-filter="photos"] .count').textContent = photos;
            document.querySelector('[data-filter="videos"] .count').textContent = videos;
            document.querySelector('[data-filter="collections"] .count').textContent = collections;
        }

        // Load more functionality
        document.getElementById('loadMoreBtn').addEventListener('click', function() {
            this.innerHTML = '<div class="spinner"></div> Loading...';
            this.disabled = true;
            
            // Simulate loading
            setTimeout(() => {
                this.innerHTML = 'Load More Saved Items';
                this.disabled = false;
                
                // In a real app, you would load more items here
                console.log('Loading more saved items...');
            }, 1500);
        });

        // Search functionality
        document.getElementById('globalSearch').addEventListener('input', function() {
            const searchTerm = this.value.toLowerCase();
            searchSavedItems(searchTerm);
        });

        function searchSavedItems(searchTerm) {
            const items = document.querySelectorAll('.saved-item');
            
            items.forEach(item => {
                const author = item.querySelector('.author-info h4').textContent.toLowerCase();
                const content = item.querySelector('.saved-item-body p').textContent.toLowerCase();
                
                if (author.includes(searchTerm) || content.includes(searchTerm)) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });
        }

        // Export saved items
        document.getElementById('exportSavedBtn').addEventListener('click', function() {
            if (confirm('Export all your saved items as a JSON file?')) {
                // In a real app, this would generate and download a file
                alert('Export started. You will receive an email when your export is ready.');
            }
        });

        // Clear all saved
        document.getElementById('clearAllBtn').addEventListener('click', function() {
            if (confirm('Are you sure you want to remove all saved items? This action cannot be undone.')) {
                document.querySelectorAll('.saved-item').forEach(item => item.remove());
                document.getElementById('emptyState').style.display = 'block';
                updateFilterCounts();
            }
        });
    </script>
</body>
</html>

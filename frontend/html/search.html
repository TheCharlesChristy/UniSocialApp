<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search - SocialConnect</title>
    <link rel="stylesheet" href="../css/generic.css">
    <link rel="stylesheet" href="../css/search.css">
</head>
<body>
    <header class="header">
        <nav class="nav">
            <div class="nav-brand">
                <a href="main-feed.html" class="brand-link">SocialConnect</a>
            </div>
            <div class="nav-menu" id="navMenu">
                <a href="main-feed.html" class="nav-link">
                    <span class="nav-icon">üè†</span>
                    <span class="nav-text">Home</span>
                </a>
                <a href="search.html" class="nav-link active">
                    <span class="nav-icon">üîç</span>
                    <span class="nav-text">Search</span>
                </a>
                <a href="messages.html" class="nav-link">
                    <span class="nav-icon">üí¨</span>
                    <span class="nav-text">Messages</span>
                </a>
                <a href="notifications.html" class="nav-link">
                    <span class="nav-icon">üîî</span>
                    <span class="nav-text">Notifications</span>
                </a>
                <div class="nav-dropdown">
                    <button class="nav-link dropdown-toggle" aria-expanded="false">
                        <span class="nav-icon">üë§</span>
                        <span class="nav-text">Profile</span>
                    </button>
                    <div class="dropdown-menu">
                        <a href="user-profile.html" class="dropdown-item">View Profile</a>
                        <a href="edit-profile.html" class="dropdown-item">Edit Profile</a>
                        <a href="manage-account.html" class="dropdown-item">Account Settings</a>
                        <a href="privacy-settings.html" class="dropdown-item">Privacy Settings</a>
                        <a href="saved-content.html" class="dropdown-item">Saved Content</a>
                        <a href="help-support.html" class="dropdown-item">Help & Support</a>
                        <hr class="dropdown-divider">
                        <a href="login.html" class="dropdown-item">Sign Out</a>
                    </div>
                </div>
            </div>
            <button class="nav-toggle" id="navToggle" aria-label="Toggle navigation">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </nav>
    </header>

    <main class="main-content">
        <div class="search-page">
            <div class="search-header">
                <div class="search-container">
                    <div class="search-box-main">
                        <input type="text" placeholder="Search SocialConnect..." class="search-input-main" id="searchInput">
                        <button type="submit" class="search-btn-main" id="searchBtn">
                            <span class="search-icon">üîç</span>
                        </button>
                    </div>
                    <div class="search-filters">
                        <button class="filter-btn active" data-filter="all">All</button>
                        <button class="filter-btn" data-filter="people">People</button>
                        <button class="filter-btn" data-filter="posts">Posts</button>
                        <button class="filter-btn" data-filter="photos">Photos</button>
                        <button class="filter-btn" data-filter="videos">Videos</button>
                        <button class="filter-btn" data-filter="groups">Groups</button>
                        <button class="filter-btn" data-filter="pages">Pages</button>
                    </div>
                </div>
            </div>

            <div class="search-content">
                <!-- Search suggestions when no query -->
                <div class="search-suggestions" id="searchSuggestions">
                    <div class="suggestions-section">
                        <h2>Recent Searches</h2>
                        <div class="recent-searches">
                            <div class="recent-search-item">
                                <span class="search-icon">üîç</span>
                                <span class="search-text">John Smith</span>
                                <button class="remove-search" aria-label="Remove search">√ó</button>
                            </div>
                            <div class="recent-search-item">
                                <span class="search-icon">üîç</span>
                                <span class="search-text">travel photography</span>
                                <button class="remove-search" aria-label="Remove search">√ó</button>
                            </div>
                            <div class="recent-search-item">
                                <span class="search-icon">üîç</span>
                                <span class="search-text">cooking recipes</span>
                                <button class="remove-search" aria-label="Remove search">√ó</button>
                            </div>
                        </div>
                        <button class="clear-all-searches">Clear All</button>
                    </div>

                    <div class="suggestions-section">
                        <h2>Trending Now</h2>
                        <div class="trending-topics">
                            <a href="#" class="trending-item">
                                <span class="trending-icon">üìà</span>
                                <span class="trending-text">#SummerVibes</span>
                                <span class="trending-count">12.5K posts</span>
                            </a>
                            <a href="#" class="trending-item">
                                <span class="trending-icon">üìà</span>
                                <span class="trending-text">#TechNews</span>
                                <span class="trending-count">8.2K posts</span>
                            </a>
                            <a href="#" class="trending-item">
                                <span class="trending-icon">üìà</span>
                                <span class="trending-text">#FoodieLife</span>
                                <span class="trending-count">15.3K posts</span>
                            </a>
                            <a href="#" class="trending-item">
                                <span class="trending-icon">üìà</span>
                                <span class="trending-text">#WorkFromHome</span>
                                <span class="trending-count">6.7K posts</span>
                            </a>
                            <a href="#" class="trending-item">
                                <span class="trending-icon">üìà</span>
                                <span class="trending-text">#Fitness</span>
                                <span class="trending-count">22.1K posts</span>
                            </a>
                        </div>
                    </div>

                    <div class="suggestions-section">
                        <h2>Suggested for You</h2>
                        <div class="suggested-people">
                            <div class="suggested-person">
                                <img src="https://images.unsplash.com/photo-1494790108755-2616b73609ca?w=150&h=150&fit=crop&crop=face" alt="Sarah Wilson" class="person-avatar">
                                <div class="person-info">
                                    <h3>Sarah Wilson</h3>
                                    <p>@sarahw_design</p>
                                    <p class="mutual-friends">5 mutual friends</p>
                                </div>
                                <button class="btn btn-primary btn-sm">Follow</button>
                            </div>
                            <div class="suggested-person">
                                <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face" alt="Mike Chen" class="person-avatar">
                                <div class="person-info">
                                    <h3>Mike Chen</h3>
                                    <p>@mikechenphoto</p>
                                    <p class="mutual-friends">3 mutual friends</p>
                                </div>
                                <button class="btn btn-primary btn-sm">Follow</button>
                            </div>
                            <div class="suggested-person">
                                <img src="https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150&h=150&fit=crop&crop=face" alt="Emma Davis" class="person-avatar">
                                <div class="person-info">
                                    <h3>Emma Davis</h3>
                                    <p>@emmadavis</p>
                                    <p class="mutual-friends">8 mutual friends</p>
                                </div>
                                <button class="btn btn-primary btn-sm">Follow</button>
                            </div>
                        </div>
                    </div>

                    <div class="suggestions-section">
                        <h2>Popular Groups</h2>
                        <div class="suggested-groups">
                            <div class="suggested-group">
                                <img src="https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=150&h=150&fit=crop" alt="Photography Enthusiasts" class="group-avatar">
                                <div class="group-info">
                                    <h3>Photography Enthusiasts</h3>
                                    <p>45.2K members</p>
                                    <p class="group-description">Share your best shots and learn photography</p>
                                </div>
                                <button class="btn btn-secondary btn-sm">Join</button>
                            </div>
                            <div class="suggested-group">
                                <img src="https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=150&h=150&fit=crop" alt="Tech Innovators" class="group-avatar">
                                <div class="group-info">
                                    <h3>Tech Innovators</h3>
                                    <p>28.7K members</p>
                                    <p class="group-description">Latest tech trends and innovations</p>
                                </div>
                                <button class="btn btn-secondary btn-sm">Join</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Search results placeholder -->
                <div class="search-results" id="searchResults" style="display: none;">
                    <div class="results-header">
                        <h2>Search Results</h2>
                        <div class="results-count">
                            <span id="resultsCount">0</span> results found
                        </div>
                    </div>
                    
                    <div class="results-content">
                        <!-- Results will be populated here -->
                    </div>
                </div>

                <!-- No results placeholder -->
                <div class="no-results" id="noResults" style="display: none;">
                    <div class="no-results-content">
                        <div class="no-results-icon">üîç</div>
                        <h2>No results found</h2>
                        <p>Try adjusting your search or browse our suggestions above.</p>
                        <div class="search-tips">
                            <h3>Search Tips:</h3>
                            <ul>
                                <li>Check your spelling</li>
                                <li>Try different keywords</li>
                                <li>Use fewer keywords</li>
                                <li>Search for people by their full name or username</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        let currentFilter = 'all';
        let searchHistory = JSON.parse(localStorage.getItem('searchHistory') || '[]');

        // Search functionality
        function performSearch() {
            const query = document.getElementById('searchInput').value.trim();
            
            if (!query) {
                showSuggestions();
                return;
            }

            // Add to search history
            addToSearchHistory(query);
            
            // Hide suggestions, show results
            document.getElementById('searchSuggestions').style.display = 'none';
            document.getElementById('searchResults').style.display = 'block';
            document.getElementById('noResults').style.display = 'none';

            // Simulate search (in real app, this would be an API call)
            simulateSearch(query);
        }

        function addToSearchHistory(query) {
            // Remove if already exists
            searchHistory = searchHistory.filter(item => item !== query);
            // Add to beginning
            searchHistory.unshift(query);
            // Keep only last 10 searches
            searchHistory = searchHistory.slice(0, 10);
            // Save to localStorage
            localStorage.setItem('searchHistory', JSON.stringify(searchHistory));
            // Update UI
            updateRecentSearches();
        }

        function updateRecentSearches() {
            const container = document.querySelector('.recent-searches');
            container.innerHTML = '';
            
            searchHistory.forEach(query => {
                const item = document.createElement('div');
                item.className = 'recent-search-item';
                item.innerHTML = `
                    <span class="search-icon">üîç</span>
                    <span class="search-text">${query}</span>
                    <button class="remove-search" aria-label="Remove search" onclick="removeFromHistory('${query}')">√ó</button>
                `;
                
                // Add click handler to search text
                item.querySelector('.search-text').addEventListener('click', () => {
                    document.getElementById('searchInput').value = query;
                    performSearch();
                });
                
                container.appendChild(item);
            });
        }

        function removeFromHistory(query) {
            searchHistory = searchHistory.filter(item => item !== query);
            localStorage.setItem('searchHistory', JSON.stringify(searchHistory));
            updateRecentSearches();
        }

        function clearAllSearches() {
            searchHistory = [];
            localStorage.removeItem('searchHistory');
            updateRecentSearches();
        }

        function showSuggestions() {
            document.getElementById('searchSuggestions').style.display = 'block';
            document.getElementById('searchResults').style.display = 'none';
            document.getElementById('noResults').style.display = 'none';
        }

        function simulateSearch(query) {
            // Simulate loading delay
            setTimeout(() => {
                // For demo purposes, show no results
                // In a real app, this would populate with actual search results
                document.getElementById('searchResults').style.display = 'none';
                document.getElementById('noResults').style.display = 'block';
                
                // Update results count
                document.getElementById('resultsCount').textContent = '0';
            }, 500);
        }

        // Event listeners
        document.getElementById('searchBtn').addEventListener('click', performSearch);

        document.getElementById('searchInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                performSearch();
            }
        });

        document.getElementById('searchInput').addEventListener('input', (e) => {
            if (!e.target.value.trim()) {
                showSuggestions();
            }
        });

        // Filter buttons
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                // Remove active class from all buttons
                document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                // Add active class to clicked button
                btn.classList.add('active');
                // Update current filter
                currentFilter = btn.dataset.filter;
                // Re-perform search with new filter
                const query = document.getElementById('searchInput').value.trim();
                if (query) {
                    performSearch();
                }
            });
        });

        // Clear all searches button
        document.querySelector('.clear-all-searches').addEventListener('click', clearAllSearches);

        // Navigation dropdown functionality
        document.querySelectorAll('.dropdown-toggle').forEach(toggle => {
            toggle.addEventListener('click', (e) => {
                e.preventDefault();
                const dropdown = toggle.parentElement;
                const menu = dropdown.querySelector('.dropdown-menu');
                const isExpanded = toggle.getAttribute('aria-expanded') === 'true';

                // Close all other dropdowns
                document.querySelectorAll('.nav-dropdown').forEach(dd => {
                    if (dd !== dropdown) {
                        dd.querySelector('.dropdown-toggle').setAttribute('aria-expanded', 'false');
                        dd.querySelector('.dropdown-menu').classList.remove('show');
                    }
                });

                // Toggle current dropdown
                toggle.setAttribute('aria-expanded', !isExpanded);
                menu.classList.toggle('show');
            });
        });

        // Mobile navigation toggle
        document.getElementById('navToggle').addEventListener('click', () => {
            const navMenu = document.getElementById('navMenu');
            navMenu.classList.toggle('active');
        });

        // Close dropdowns when clicking outside
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.nav-dropdown')) {
                document.querySelectorAll('.nav-dropdown').forEach(dropdown => {
                    dropdown.querySelector('.dropdown-toggle').setAttribute('aria-expanded', 'false');
                    dropdown.querySelector('.dropdown-menu').classList.remove('show');
                });
            }
        });

        // Initialize page
        updateRecentSearches();
        showSuggestions();
    </script>
</body>
</html>
